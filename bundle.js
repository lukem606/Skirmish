(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(81),a=n.n(i),r=n(645),o=n.n(r)()(a());o.push([t.id,"body {\n  background-color: rgb(0, 0, 0);\n  margin: 0;\n}\n",""]);const s=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,a,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);i&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),e.push(h))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},o=[],s=0;s<t.length;s++){var c=t[s],u=i.base?c[0]+i.base:c[0],h=r[u]||0,l="".concat(u," ").concat(h);r[u]=h+1;var d=n(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var v=a(f,i);i.byIndex=s,e.splice(s,0,{identifier:l,updater:v,references:1})}o.push(l)}return o}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var r=i(t=t||[],a=a||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var s=n(r[o]);e[s].references--}for(var c=i(t,a),u=0;u<r.length;u++){var h=n(r[u]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=c}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,a&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,i;return n=e,i=[{key:"degreesToRadians",value:function(t){return t*Math.PI/180}},{key:"randomInt",value:function(t){return Math.floor(Math.random()*t)}},{key:"gaussian",value:function(){for(var t=0,e=0;0===t;)t=Math.random();for(;0===e;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}}],null&&t(n.prototype,null),i&&t(n,i),e}();function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e||0,this.y=n||0,this.z=i||0}var e,n,a;return e=t,a=[{key:"add",value:function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z)}},{key:"sub",value:function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)}},{key:"mult",value:function(e,n){return new t(e.x*n,e.y*n,e.z*n)}},{key:"div",value:function(e,n){var i,a,r;return 0!==n?(i=e.x/n,a=e.y/n,r=e.z/n):(console.warn("Dividing by zero!"),i=e.x,a=e.y,r=e.z_),new t(i,a,r)}},{key:"fromAngle2d",value:function(e){return new t(Math.cos(e),Math.sin(e))}},{key:"fromAngle3d",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),a=Math.cos(t),r=Math.sin(t);return new p5.Vector(r*i,-1*a,r*n)}}],(n=[{key:"add",value:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}},{key:"sub",value:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}},{key:"mult",value:function(t){this.x*=t,this.y*=t,this.z*=t}},{key:"div",value:function(t){0!==t?(this.x/=t,this.y/=t,this.z/=t):console.warn("Dividing by zero!")}},{key:"copy",value:function(){return new t(this.x,this.y,this.z)}},{key:"dist",value:function(e){return t.sub(e,this).magnitude()}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}},{key:"heading",value:function(){return Math.atan2(this.y,this.x)}},{key:"normalise",value:function(){var t=this.magnitude();return 0!==t&&this.mult(1/t),this}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}])&&i(e.prototype,n),a&&i(e,a),t}();function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.location=new a(n,i),this.velocity=new a,this.size=new a(10,10),this.stats={health:100,attack:20+2*e.gaussian(),speed:2+e.gaussian()/2,fov:150},this.state={behaviour:"PATROLLING",destination:0,target:0,heading:0,previous:performance.now()}}var i,o;return i=t,o=[{key:"update",value:function(){"PATROLLING"===this.state.behaviour?this.patrol():"REST"===this.state.behaviour&&this.rest()}},{key:"patrol",value:function(){if(0===this.state.destination){this.state.destination=new a(Math.random()*n.g.WIDTH,Math.random()*n.g.HEIGHT);var t=a.sub(this.state.destination,this.location);t.normalise(),this.state.heading=t,this.velocity=a.mult(this.state.heading,this.stats.speed)}else this.location.equals(this.state.destination)?(this.state.behaviour="REST",this.state.destination=0,this.state.previous=performance.now()):a.dist(this.location,this.state.destination)<this.stats.speed?this.location=this.state.destination.copy():this.location.add(this.velocity)}},{key:"rest",value:function(){performance.now()-this.state.previous>5e3&&(this.state.behaviour="PATROLLING")}},{key:"checkEdges",value:function(){var t=n.g.canvas;this.location.x<this.size.x/2?this.location.x=t.width-this.size.x/2:this.location.x>t.width-this.size.x/2&&(this.location.x=this.size.x/2),this.location.y<this.size.y/2?this.location.y=t.height-this.size.y/2:this.location.y>t.height-this.size.y/2&&(this.location.y=this.size.y/2)}},{key:"render",value:function(){var t=n.g.context;t.beginPath(),t.save(),t.translate(this.location.x,this.location.y),t.rotate(this.velocity.heading()),t.fillStyle="rgba(100, 100, 100, 0.3)",t.lineTo(Math.cos(e.degreesToRadians(-65)),Math.sin(e.degreesToRadians(-65))),t.arc(0,0,this.stats.fov,e.degreesToRadians(-65),e.degreesToRadians(65)),t.lineTo(0,0),t.fill(),t.fillStyle="rgb(3, 160, 98)",t.fillRect(-1*this.size.x/2,-1*this.size.y/2,this.size.x,this.size.y),t.restore(),t.closePath()}}],o&&r(i.prototype,o),t}(),s=n(379),c=n.n(s),u=n(795),h=n.n(u),l=n(569),d=n.n(l),f=n(565),v=n.n(f),y=n(216),p=n.n(y),m=n(589),g=n.n(m),b=n(426),x={};x.styleTagTransform=g(),x.setAttributes=v(),x.insert=d().bind(null,"head"),x.domAPI=h(),x.insertStyleElement=p(),c()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals,n.g=(function(){var t=window.innerWidth-40,e=window.innerHeight-40,n=document.createElement("div");n.id="container",n.style.padding="".concat(20,"px");var i=document.createElement("canvas");i.width=t,i.height=e,n.appendChild(i),document.body.appendChild(n)}(),function(){var t=document.querySelector("canvas"),e=t.getContext("2d");return{canvas:t,context:e,WIDTH:t.width,HEIGHT:t.height}}());for(var w=n.g,z=w.canvas,k=w.context,T=w.WIDTH,M=w.HEIGHT,E=[],I=0;I<5;I++){var C=new o(50+15*I,50),P=new a(1,2);P.normalise(),P.mult(C.stats.speed),C.velocity=P,E.push(C)}!function t(){k.clearRect(0,0,T,M),E.forEach((function(t){t.update(),t.checkEdges(z),t.render(k)})),requestAnimationFrame(t)}()})()})();