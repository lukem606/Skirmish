(()=>{"use strict";var t={426:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(81),a=i.n(n),s=i(645),o=i.n(s)()(a());o.push([t.id,"body {\n  background-color: rgb(0, 0, 0);\n  margin: 0;\n}\n",""]);const r=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,a,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(n)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(o[l]=!0)}for(var h=0;h<t.length;h++){var u=[].concat(t[h]);n&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),e.push(u))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var s={},o=[],r=0;r<t.length;r++){var l=t[r],h=n.base?l[0]+n.base:l[0],u=s[h]||0,c="".concat(h," ").concat(u);s[h]=u+1;var f=i(c),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var v=a(d,n);n.byIndex=r,e.splice(r,0,{identifier:c,updater:v,references:1})}o.push(c)}return o}function a(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,a){var s=n(t=t||[],a=a||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var r=i(s[o]);e[r].references--}for(var l=n(t,a),h=0;h<s.length;h++){var u=i(s[h]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=l}}},569:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var a=void 0!==i.layer;a&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,a&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={id:n,exports:{}};return t[n](s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var e=function(){function e(t,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t||0,this.y=i||0,this.z=n||0}var i,n,a;return i=e,a=[{key:"add",value:function(t,i){return new e(t.x+i.x,t.y+i.y,t.z+i.z)}},{key:"sub",value:function(t,i){return new e(t.x-i.x,t.y-i.y,t.z-i.z)}},{key:"mult",value:function(t,i){return new e(t.x*i,t.y*i,t.z*i)}},{key:"div",value:function(t,i){var n,a,s;return 0!==i?(n=t.x/i,a=t.y/i,s=t.z/i):(console.warn("Dividing by zero!"),n=t.x,a=t.y,s=t.z_),new e(n,a,s)}},{key:"fromAngle2d",value:function(t){return new e(Math.cos(t),Math.sin(t))}},{key:"fromAngle3d",value:function(t,e){var i=Math.cos(e),n=Math.sin(e),a=Math.cos(t),s=Math.sin(t);return new p5.Vector(s*n,-1*a,s*i)}}],(n=[{key:"add",value:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}},{key:"sub",value:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}},{key:"mult",value:function(t){this.x*=t,this.y*=t,this.z*=t}},{key:"div",value:function(t){0!==t?(this.x/=t,this.y/=t,this.z/=t):console.warn("Dividing by zero!")}},{key:"angleBetween",value:function(t){var e=this.dot(t)/(this.magnitude()*t.magnitude());return Math.acos(Math.min(1,Math.max(-1,e)))*Math.sign(this.cross(t).z||1)}},{key:"copy",value:function(){return new e(this.x,this.y,this.z)}},{key:"cross",value:function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"dist",value:function(t){return e.sub(t,this).magnitude()}},{key:"dot",value:function(t){return this.x*(t.x||0)+this.y*(t.y||0)+this.z*(t.z||0)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}},{key:"heading",value:function(){return Math.atan2(this.y,this.x)}},{key:"limit",value:function(t){var e=this.magnitude;e*e>t*t&&(this.div(e),this.mult(t))}},{key:"normalise",value:function(){var t=this.magnitude();0!==t&&this.mult(1/t)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}])&&t(i.prototype,n),a&&t(i,a),e}();function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i.g.WIDTH,this.height=i.g.HEIGHT,this.cellsX=6,this.cellsY=4,this.cellSize=new e(i.g.WIDTH/6,i.g.HEIGHT/4)}var a,s;return a=t,(s=[{key:"initialiseCells",value:function(){for(var t=[],e=0;e<this.cellsX;e++){for(var i=[],n=0;n<this.cellsY;n++)i.push({obstacles:[],platoons:[],units:[],ballistics:[]});t.push(i)}return t}},{key:"getMapCell",value:function(t){var e=Math.floor(t.x/this.size.x),i=Math.floor(t.y/this.size.y);return this.cells[e][i]}},{key:"updateCell",value:function(t){var e=this.getMapCell(t.prevLocation);if(e!=this.getMapCell(t.location)){this.shiftedUnits.push(t);var i=e.units.indexOf(t);e.units.splice(i,1)}}},{key:"render",value:function(){for(var t=i.g.context,e=0;e<this.cellsY;e++)for(var n=0;n<this.cellsX;n++)t.strokeStyle="rgb(100, 100, 100, 0.3)",t.strokeRect(n*this.cellSize.x,e*this.cellSize.y,this.cellSize.x,this.cellSize.y)}}])&&n(a.prototype,s),t}();function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,i=[{key:"degreesToRadians",value:function(t){return t*Math.PI/180}},{key:"random",value:function(t,e){var i=e-t;return Math.random()*i+t}},{key:"gaussian",value:function(){for(var t=0,e=0;0===t;)t=Math.random();for(;0===e;)e=Math.random();return Math.sqrt(-1*Math.log(t))*Math.cos(1*Math.PI*e)}},{key:"mean",value:function(t){return t.reduce((function(t,e){return t+e}))/t.length}},{key:"map",value:function(t,e,i,n,a){return t/(e-i)*(n-a)}}],null&&s(e.prototype,null),i&&s(e,i),t}(),l=new Uint8Array(16);function h(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(l)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(t){return"string"==typeof t&&u.test(t)};for(var f=[],d=0;d<256;++d)f.push((d+256).toString(16).substr(1));const v=function(t,e,i){var n=(t=t||{}).random||(t.rng||h)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){i=i||0;for(var a=0;a<16;++a)e[i+a]=n[a];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase();if(!c(i))throw TypeError("Stringified UUID is invalid");return i}(n)};function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,i=[{key:"getFormation",value:function(t){return 2===t?[[0,-.75],[0,.75]]:3===t?[[.75,0],[-.75,-.75],[-.75,.75]]:4===t?[[.75,-.75],[.75,.75],[-.75,-.75],[-.75,.75]]:5===t?[[1.5,0],[0,-.75],[0,.75],[-1.5,-.75],[-1.5,.75]]:6===t?[[1.5,-.75],[1.5,.75],[0,-.75],[0,.75],[-1.5,-.75],[-1.5,.75]]:7===t?[[2.25,0],[.75,-.75],[.75,.75],[-.75,-.75],[-.75,.75],[-2.25,-.75],[-2.25,.75]]:8===t?[[2.25,-.75],[2.25,.75],[.75,-.75],[.75,.75],[-.75,-.75],[-.75,.75],[-2.25,-.75],[-2.25,.75]]:9===t?[[3,0],[1.5,-.75],[1.5,.75],[0,-.75],[0,.75],[-1.5,-.75],[-1.5,.75],[-3,-.75],[-3,.75]]:void 0}}],null&&y(e.prototype,null),i&&y(e,i),t}();const g={teams:["rgb(235, 60, 39)","rgb(35, 98, 162)","rgb(3, 160, 98)","rgb(251, 183, 65)"]};function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var x=function(){function t(n,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.location=new e(n,a),this.velocity=new e(r.random(0,i.g.WIDTH),r.random(0,i.g.HEIGHT)),this.acceleration=new e,this.size=new e(4,4),this.angle=this.velocity.heading(),this.angleOffset=0;var o=20+2*r.gaussian(),l=1+.25*r.gaussian(),h=100+10*r.gaussian(),u=.75*h,c=r.random(2,4);this.stats={team:s,health:100,attack:o,speed:l,fov:h,range:u,restTime:c},this.state={behaviour:"NON-COMBAT",action:"REST",previous:performance.now(),id:v()}}var n,a;return n=t,(a=[{key:"update",value:function(){"NON-COMBAT"===this.state.behaviour?"PATROL"===this.state.action?this.patrol():"REST"===this.state.action?this.rest():"JOIN"===this.state.action&&this.join():"COMBAT"===this.state.behaviour&&("ATTACK"===this.state.action||this.state.action)}},{key:"patrol",value:function(){this.location.equals(this.state.destination)?(this.state.action="REST",this.state.previous=performance.now()):this.location.dist(this.state.destination)<this.stats.speed?this.location=this.state.destination.copy():(this.seek(this.state.destination),this.updateLocation())}},{key:"rest",value:function(){performance.now()-this.state.previous>1e3*this.stats.restTime&&(this.state.action="PATROL",this.getDestination(),this.acceleration=e.mult(this.state.direction,this.stats.speed),this.angle=0,this.angleOffset=0)}},{key:"join",value:function(){}},{key:"seek",value:function(t){var i=e.sub(t,this.location);i.normalise(),i.mult(this.stats.fov/2);var n=r.random(0,2*Math.PI),a=this.stats.fov/2,s=e.add(i,new e(Math.cos(n)*a,Math.sin(n)*a));s.normalise(),s.mult(this.stats.speed);var o=e.sub(s,this.velocity);this.applyForce(o),this.angle=i.heading()+r.map(Math.cos(this.angleOffset),0,2*Math.PI,0,Math.PI),this.angleOffset+=.3}},{key:"getDestination",value:function(){var t=i.g,n=t.WIDTH,a=t.HEIGHT,s=new e(Math.random()*n,Math.random()*a),o=e.sub(s,this.location),r=o.magnitude();o.normalise(),this.state.direction=o,r>2*this.stats.fov&&(s=this.normaliseDestination(s)),this.state.destination=s}},{key:"normaliseDestination",value:function(t){if((t=e.add(this.location,e.mult(this.state.direction,2*this.stats.fov))).x<0||t.x>i.g.WIDTH){var n=Math.abs(t.x)/(this.location.x-t.x);t=new e(Math.cos(direction.heading())*n,Math.sin(direction.heading())*n)}if(t.y<0||t.y>i.g.HEIGHT){var a=Math.abs(t.y)/(this.location.y-t.y);t=new e(Math.cos(direction.heading())*a,Math.sin(direction.heading())*a)}return t}},{key:"copyPlatoonDestination",value:function(t){var i=this.location.angleBetween(t),n=this.location.dist(t);i+=r.degreesToRadians(r.random(-5,5)),n+=r.random(-n/10,n/10);var a=Math.cos(i)*n,s=Math.sin(i)*n,o=new e(a,s);o=this.normaliseDestination(o),this.state.destination=o}},{key:"updateLocation",value:function(){this.velocity.add(this.acceleration),this.velocity.limit(this.stats.speed),this.location.add(this.velocity),this.acceleration.mult(0)}},{key:"applyForce",value:function(t){this.acceleration.add(t)}},{key:"checkEdges",value:function(){var t=i.g,e=t.WIDTH,n=t.HEIGHT;this.location.x<0?this.location.x=0:this.location.x>e-this.size.x&&(this.location.x=e-this.size.x),this.location.y<0?this.location.y=0:this.location.y>n-this.size.y&&(this.location.y=n-this.size.y)}},{key:"render",value:function(){var t=i.g.context;t.save(),t.translate(this.location.x,this.location.y),t.rotate(this.angle),t.fillStyle=g.teams[this.stats.team],t.fillRect(-.5*this.size.x/2,-1*this.size.y,this.size.x/2,this.size.y/2),t.fillRect(-.5*this.size.x/2,1*this.size.y/2,this.size.x/2,this.size.y/2),t.fillRect(-1*this.size.x/2,-1*this.size.y/2,this.size.x,this.size.y),t.restore(),t.closePath()}}])&&m(n.prototype,a),t}();function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(i,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;b(this,t),this.location=new e(i,n),this.velocity=new e(r.random(-1,1),r.random(-1,1)),this.units=a||this.populate(s),this.size=new e(30,2.5*this.units[0].size.y),this.stats={team:s,speed:r.mean(this.units.map((function(t){return t.stats.speed}))),fov:r.mean(this.units.map((function(t){return t.stats.fov}))),restTime:r.mean(this.units.map((function(t){return t.stats.restTime})))},this.state={behaviour:"NON-COMBAT",action:"REST",destination:0,target:0,direction:0,formation:p.getFormation(this.units.length),previous:performance.now(),id:v()}}var n,a;return n=t,a=[{key:"populate",value:function(t){for(var e=[],i=0;i<9;i++){var n=new x(this.location.x+20*Math.random(),this.location.y+20*Math.random(),t);e.push(n)}return e}},{key:"update",value:function(){"NON-COMBAT"===this.state.behaviour&&("PATROL"===this.state.action?this.patrol():"REST"===this.state.action?this.rest():"JOIN"===this.state.action&&this.join())}},{key:"patrol",value:function(){this.location.equals(this.state.destination)?(this.state.action="REST",this.state.destination=0,this.state.previous=performance.now()):this.location.dist(this.state.destination)<this.stats.speed?this.location=this.state.destination.copy():this.location.add(this.velocity)}},{key:"rest",value:function(){performance.now()-this.state.previous>1e3*this.stats.restTime&&(this.state.action="PATROL",this.getDestination())}},{key:"getDestination",value:function(){var t=i.g,n=t.WIDTH,a=t.HEIGHT,s=new e(Math.random()*n,Math.random()*a),o=e.sub(s,this.location);o.normalise(),this.state.direction=o,this.location.dist(s)>2*this.stats.fov&&(s=this.normaliseDestination(s)),this.state.destination=s,this.velocity=e.mult(o,this.stats.speed)}},{key:"normaliseDestination",value:function(t){if((t=e.add(this.location,e.mult(this.state.direction,2*this.stats.fov))).x<0||t.x>i.g.WIDTH){var n=Math.abs(t.x)/(this.location.x-t.x);t=new e(Math.cos(direction.heading())*n,Math.sin(direction.heading())*n)}if(t.y<0||t.y>i.g.HEIGHT){var a=Math.abs(t.y)/(this.location.y-t.y);t=new e(Math.cos(direction.heading())*a,Math.sin(direction.heading())*a)}return t}},{key:"checkEdges",value:function(){var t=i.g.canvas;this.location.x<0?this.location.x=t.width-this.size.x:this.location.x>t.width-this.size.x&&(this.location.x=0),this.location.y<0?this.location.y=t.height-this.size.y:this.location.y>t.height-this.size.y&&(this.location.y=0)}},{key:"render",value:function(){var t=this,e=i.g.context;e.beginPath(),e.save(),e.translate(this.location.x,this.location.y),e.rotate(this.velocity.heading()),e.fillStyle="rgba(100, 100, 100, 0.3)",e.lineTo(Math.cos(r.degreesToRadians(-65)),Math.sin(r.degreesToRadians(-65))),e.arc(0,0,this.stats.fov,r.degreesToRadians(-65),r.degreesToRadians(65)),e.lineTo(0,0),e.fill(),this.units.forEach((function(i,n){e.fillStyle="rgb(3, 160, 98)",e.fillRect(t.state.formation[n][0]*i.size.x,t.state.formation[n][1]*i.size.y,i.size.x,i.size.y)})),e.restore(),e.closePath()}}],a&&w(n.prototype,a),t}();function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;T(this,t),this.head=e,this.tail=e,this.length=null==e?0:1}var e,i;return e=t,i=[{key:"getAll",value:function(){for(var t=[],e=this.head;e;)t.push(e.value),e=e.next;return t}},{key:"printList",value:function(){for(var t=[],e=this.head;null!==e;)t.push(e),e=e.next;console.log([].concat(t))}},{key:"prepend",value:function(t){var e=new C(t);0===this.length?(this.head=e,this.tail=this.head):(e.next=this.head,this.head.previous=e,this.head=e),this.length++}},{key:"append",value:function(t){var e=new C(t);console.log(this.head),console.log(this.tail),console.log(this.length),0===this.length?(this.head=e,this.tail=this.head):(this.tail.next=e,e.previous=this.tail,this.tail=e),this.length++}},{key:"insert",value:function(t,e){if(e<0||e>this.length||!Number.isInteger(e))console.warn("Index is not a valid integer! Current length ".concat(this.length));else{if(0===e)this.prepend(t);else if(e===this.length)this.append(t);else{for(var i=new C(t),n=this.head,a=0;a<e-1;a++)n=n.next;var s=n.next;i.next=s,n.next=i,i.previous=n,s.previous=i}this.length++}}},{key:"remove",value:function(t){for(var e=this.head;e;){if(e.value===t)return e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(this.tail=e.previous,this.tail.next=null):e.next?(this.head=e.next,this.head.previous=null):(this.head=null,this.tail=this.head),void this.length--;e=e.next}console.warn('"'.concat(t,'" not found in list!'))}}],i&&M(e.prototype,i),t}(),C=function t(e){T(this,t),this.value=e,this.previous=null,this.next=null};function H(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E=function(){function t(n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i.g.WIDTH,this.height=i.g.HEIGHT,this.cellsX=n,this.cellsY=a,this.cellSize=new e(i.g.WIDTH/n,i.g.HEIGHT/a),this.cells=this.initaliseCells()}var n,a;return n=t,(a=[{key:"initaliseCells",value:function(){for(var t=[],e=0;e<this.cellsY;e++){for(var i=[],n=0;n<this.cellsX;n++)i.push({id:e*this.cellsX+n,obstacles:new z,platoons:new z,units:new z,ballistics:new z});t.push(i)}return t}},{key:"getCellFromVector",value:function(t){var e=Math.floor(t.x/this.cellSize.x),i=Math.floor(t.y/this.cellSize.y);return this.cells[i][e]}},{key:"updateCell",value:function(t,e){var i=this.getCellFromVector(t.location);e.id!==i.id&&(t instanceof x?(i.units.append(t),e.units.remove(t)):t instanceof k&&(i.platoons.append(t),e.platoons.remove(t)))}}])&&H(n.prototype,a),t}();function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,s;return n=t,s=[{key:"initialiseCanvas",value:function(t){var e=window.innerWidth-2*t,n=window.innerHeight-2*t,a=document.createElement("div");a.id="container",a.style.padding="".concat(t,"px");var s=document.createElement("canvas");s.width=e,s.height=n,a.appendChild(s),document.body.appendChild(a),this.canvas=document.querySelector("canvas"),this.context=s.getContext("2d"),i.g={canvas:this.canvas,context:this.context,WIDTH:e,HEIGHT:n}}},{key:"initialiseMap",value:function(){return new a}},{key:"initialiseGrid",value:function(){var t=new E(6,4);return this.initialiseUnits(t),this.initialisePlatoons(t),t}},{key:"initialiseUnits",value:function(t){for(var n=0;n<50;n++){var a=new e(Math.random()*i.g.WIDTH,Math.random()*i.g.HEIGHT),s=new x(a.x,a.y,n%4);t.getCellFromVector(a).units.append(s)}}},{key:"initialisePlatoons",value:function(t){for(var n=0;n<5;n++){for(var a=[],s=new e(r.random(50,i.g.WIDTH-50),r.random(50,i.g.HEIGHT-50)),o=0;o<Math.round(r.random(2,9));o++){var l=new x(s.x+10*r.gaussian(),s.y+10*r.gaussian(),0);a.push(l)}t.getCellFromVector(s).platoons.append(new k(s.x,s.y,a))}}}],null&&I(n.prototype,null),s&&I(n,s),t}();function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O.initialiseCanvas(20),this.map=O.initialiseMap(),this.grid=O.initialiseGrid()}var e,n;return e=t,(n=[{key:"run",value:function(){this.draw(),requestAnimationFrame(this.run.bind(this))}},{key:"draw",value:function(){i.g.context.clearRect(0,0,i.g.WIDTH,i.g.HEIGHT),this.map.render();for(var t=0;t<this.grid.cellsY;t++)for(var e=0;e<this.grid.cellsX;e++)for(var n=this.grid.cells[t][e],a=(n.platoons.head,n.units.head);a;){var s=a.value;s.update(),s.checkEdges(),s.render(),a=a.next,this.grid.updateCell(s,n)}}}])&&P(e.prototype,n),t}(),S=i(379),D=i.n(S),A=i(795),j=i.n(A),G=i(569),N=i.n(G),W=i(565),F=i.n(W),L=i(216),V=i.n(L),q=i(589),U=i.n(q),B=i(426),X={};X.styleTagTransform=U(),X.setAttributes=F(),X.insert=N().bind(null,"head"),X.domAPI=j(),X.insertStyleElement=V(),D()(B.Z,X),B.Z&&B.Z.locals&&B.Z.locals,(new R).run()})()})();